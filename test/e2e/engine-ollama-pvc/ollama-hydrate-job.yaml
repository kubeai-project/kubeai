apiVersion: batch/v1
kind: Job
metadata:
  name: ollama-pvc-hydrate
spec:
  template:
    spec:
      containers:
      - name: ollama
        image: ollama/ollama:latest
        env:
        - name: OLLAMA_MODELS
          value: /model
        command: 
        - /bin/sh
        - -c
        - |
          /bin/ollama pull qwen:0.5b
          ls -R /model
        volumeMounts:
        - name: models-volume
          mountPath: /model
      volumes:
      - name: models-volume
        persistentVolumeClaim:
          claimName: model-pvc
          readOnly: false
      restartPolicy: OnFailure
