apiVersion: skaffold/v4beta11
kind: Config
metadata:
  name: kubeai-messaging-rabbitmq-test
build:
  artifacts:
    - image: substratusai/kubeai
  local:
    push: false
manifests:
  rawYaml:
    - ./test/e2e/messaging-rabbitmq/rabbitmq.yaml
deploy:
  helm:
    releases:
      - name: kubeai
        chartPath: ./charts/kubeai
        valuesFiles:
          - ./test/e2e/messaging-rabbitmq/values.yaml
        skipBuildDependencies: true
portForward:
  - resourceType: service
    resourceName: rabbitmq
    namespace: default
    port: 5672
    localPort: 5672
  - resourceType: service
    resourceName: kubeai
    namespace: default
    port: 80
    localPort: 8000
